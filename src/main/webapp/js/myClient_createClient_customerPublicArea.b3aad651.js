(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["myClient_createClient_customerPublicArea"],{"2ac3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("客户公海")])],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("客户公海")])]),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.customerPubliceAreaList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",width:"90"}}),a("el-table-column",{attrs:{prop:"customerName",label:"客户名称",width:"150"}}),a("el-table-column",{attrs:{prop:"contactPersonName",label:"联系人",width:"120"}}),a("el-table-column",{attrs:{prop:"contactPersonPhone",label:"电话",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.contactPersonPhone?e.row.contactPersonPhone:"---")+" ")]}}])}),a("el-table-column",{attrs:{prop:"lastFollowUpDate",label:"上次跟进时间",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(null===e.row.lastFollowUpDate?"---":e.row.lastFollowUpDate)+" ")]}}])}),a("el-table-column",{attrs:{prop:"contactPersonStatus",label:"客户状态"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.customerStatusId?a("el-tag",{attrs:{type:"danger"}},[t._v("跟进中")]):"2"===e.row.customerStatusId?a("el-tag",{attrs:{type:"success"}},[t._v("已成交")]):a("el-tag",{attrs:{type:"info"}},[t._v("已失效")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.custoerPublicAreaDetail(e.row.customerId)}}},[t._v("详情")])]}}])})],1)],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},s=[],n=(a("d3b7"),a("96cf"),a("4328")),o=a.n(n),u={data:function(){return{customerPubliceAreaList:[],totalNum:null,pageSize:null,currentPage:1}},created:function(){this.getCustomerPublicAreaList()},methods:{custoerPublicAreaDetail:function(t){this.$router.push({path:"/detail/custoerPublicAreaDetail",query:{id:t}})},handleCurrentChange:function(t){this.currentPage=t,this.getCustomerPublicAreaList()},handleSizeChange:function(t){this.pageSize=t,this.getCustomerPublicAreaList()},getCustomerPublicAreaList:function(){var t,e,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t=o.a.stringify({pageSize:this.pageSize,pageNum:this.currentPage}),r.next=3,regeneratorRuntime.awrap(this.$http.post("/customer/findCustomerPublicArea",t));case 3:if(e=r.sent,a=e.data,200===a.status){r.next=7;break}return r.abrupt("return",this.$message.error("获取信息失败！"));case 7:this.totalNum=a.data.totalNum-0,this.pageSize=a.data.pageSize-0,this.currentPage=a.data.currentPage,this.customerPubliceAreaList=a.data.items;case 11:case"end":return r.stop()}}),null,this)}}},c=u,i=a("2877"),l=Object(i["a"])(c,r,s,!1,null,"5d709e90",null);e["default"]=l.exports},"2ace":function(t,e,a){},"31a0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:t.pathId}}},[t._v("我的客户")]),a("el-breadcrumb-item",[t._v("客户详情")])],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("客户详情")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-d-arrow-left"},on:{click:t.returnHandle}},[t._v("返回")])],1),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.addCustomRuleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"客户状态",prop:"CustomerStatusId"}},[a("el-select",{attrs:{placeholder:"请选择客户状态"},model:{value:t.addCustomRuleForm.CustomerStatusId,callback:function(e){t.$set(t.addCustomRuleForm,"CustomerStatusId",e)},expression:"addCustomRuleForm.CustomerStatusId"}},t._l(t.customerStatus,(function(t,e){return a("el-option",{key:e,attrs:{label:t.customerStatusName,value:t.customerStatusId}})})),1)],1),a("el-form-item",{attrs:{label:"客户名称",prop:"CustomerName"}},[a("el-input",{staticClass:"el-input-width",model:{value:t.addCustomRuleForm.CustomerName,callback:function(e){t.$set(t.addCustomRuleForm,"CustomerName",e)},expression:"addCustomRuleForm.CustomerName"}})],1),a("el-form-item",{attrs:{label:"联系人",prop:"contactPersonName"}},[a("el-input",{staticClass:"el-input-width",model:{value:t.addCustomRuleForm.contactPersonName,callback:function(e){t.$set(t.addCustomRuleForm,"contactPersonName",e)},expression:"addCustomRuleForm.contactPersonName"}})],1),a("el-form-item",{attrs:{label:"客户电话",prop:"contactPersonPhone"}},[a("el-input",{staticClass:"el-input-width",model:{value:t.addCustomRuleForm.contactPersonPhone,callback:function(e){t.$set(t.addCustomRuleForm,"contactPersonPhone",e)},expression:"addCustomRuleForm.contactPersonPhone"}})],1),a("el-form-item",{attrs:{label:"客户微信",prop:"contactPersonWechat"}},[a("el-input",{staticClass:"el-input-width",model:{value:t.addCustomRuleForm.contactPersonWechat,callback:function(e){t.$set(t.addCustomRuleForm,"contactPersonWechat",e)},expression:"addCustomRuleForm.contactPersonWechat"}})],1),a("el-form-item",{attrs:{label:"阿里旺旺号",prop:"contactPersonWangwang"}},[a("el-input",{staticClass:"el-input-width",model:{value:t.addCustomRuleForm.contactPersonWangwang,callback:function(e){t.$set(t.addCustomRuleForm,"contactPersonWangwang",e)},expression:"addCustomRuleForm.contactPersonWangwang"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.addCustomSubmitForm("ruleForm")}}},[t._v("立即新增")]),a("el-button",{attrs:{plain:"",type:"danger"},on:{click:function(e){return t.addCustomResetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)],1)},s=[],n=(a("d3b7"),a("96cf"),a("4328")),o=a.n(n),u={data:function(){return{addCustomRuleForm:{CustomerStatusId:"",CustomerName:"",contactPersonName:"",contactPersonPhone:"",contactPersonWechat:"",contactPersonWangwang:"",UserId:"",UserName:""},rules:{CustomerStatusName:[{required:!0,message:"请选择客户状态",trigger:"change"}],CustomerName:[{required:!0,message:"请填写客户名称",trigger:"blur"}],contactPersonName:[{required:!0,message:"请填写联系人名称",trigger:"blur"}]},pathId:"",customerStatus:[]}},created:function(){this.addCustomRuleForm.UserId=window.sessionStorage.getItem("userId"),this.pathId="/my/myclient",this.getUserInfo(),this.getCustomerStatus()},methods:{getCustomerStatus:function(){var t,e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.post("/customerStatus/findCustomerStatus"));case 2:t=a.sent,e=t.data,this.customerStatus=e.data;case 5:case"end":return a.stop()}}),null,this)},getUserInfo:function(){var t,e,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t=o.a.stringify({userId:this.addCustomRuleForm.UserId}),r.next=3,regeneratorRuntime.awrap(this.$http.post("/user/findUser",t));case 3:e=r.sent,a=e.data,this.addCustomRuleForm.UserName=a.data.userName;case 6:case"end":return r.stop()}}),null,this)},addCustomSubmitForm:function(t){var e=this;this.$refs[t].validate((function(t){var a,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:if(!t){s.next=16;break}if(a=e.addCustomRuleForm.contactPersonPhone||e.addCustomRuleForm.contactPersonWechat||e.addCustomRuleForm.contactPersonWangwang,a){s.next=4;break}return s.abrupt("return",e.$message.error("至少输入一种联系方式！"));case 4:if(r=/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/,!e.addCustomRuleForm.contactPersonPhone){s.next=13;break}if(!r.test(e.addCustomRuleForm.contactPersonPhone)){s.next=10;break}e.addCustomer(),s.next=11;break;case 10:return s.abrupt("return",e.$message.error("请输入合法得手机号！"));case 11:s.next=14;break;case 13:e.addCustomer();case 14:s.next=17;break;case 16:return s.abrupt("return",e.$message.error("提交失败！"));case 17:case"end":return s.stop()}}))}))},addCustomer:function(){var t,e,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return this.isCustomerStatusName(this.addCustomRuleForm.CustomerStatusId-0),t=o.a.stringify(this.addCustomRuleForm),r.next=4,regeneratorRuntime.awrap(this.$http.post("/customer/addCustomer",t));case 4:if(e=r.sent,a=e.data,this.addCustomResetForm("ruleForm"),this.$router.push("/my/myclient"),200===a.status){r.next=12;break}return r.abrupt("return",this.$message.error(a.msg));case 12:this.$message.success(a.msg),this.$router.push(this.pathId);case 14:case"end":return r.stop()}}),null,this)},addCustomResetForm:function(t){this.$refs[t].resetFields()},returnHandle:function(){this.$router.push(this.pathId)},isCustomerStatusName:function(t){this.addCustomRuleForm.CustomerStatusName=1===t?"跟进中":2===t?"已成交":"已失效"}}},c=u,i=(a("e712"),a("2877")),l=Object(i["a"])(c,r,s,!1,null,"119f991a",null);e["default"]=l.exports},"498a":function(t,e,a){"use strict";var r=a("23e7"),s=a("58a8").trim,n=a("e070");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return s(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),s=a("5899"),n="["+s+"]",o=RegExp("^"+n+n+"*"),u=RegExp(n+n+"*$"),c=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(o,"")),2&t&&(a=a.replace(u,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},dd58:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("我的客户")])],1),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("我的客户")])]),a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"middle",plain:""},on:{click:t.createClientHandle}},[t._v("新增客户")])],1),a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{change:t.searchChange,clear:t.searchClear},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchHandle},slot:"append"})],1)],1),a("el-col",{attrs:{span:12}},[a("el-select",{attrs:{placeholder:"跟进中"},on:{change:t.customerChangeHandle},model:{value:t.customerStatusName,callback:function(e){t.customerStatusName=e},expression:"customerStatusName"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),t._l(t.options,(function(t){return a("el-option",{key:t.customerStatusId,attrs:{label:t.customerStatusName,value:t.customerStatusId}})}))],2)],1)],1),a("el-row",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.customerTableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"编号",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"userName",label:"归属同事",width:"70"}}),a("el-table-column",{attrs:{prop:"customerName",label:"客户名称",width:"80"}}),a("el-table-column",{attrs:{prop:"contactPersonName",label:"联系人",width:"80"}}),a("el-table-column",{attrs:{prop:"contactPersonPhone",label:"电话",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.contactPersonPhone?e.row.contactPersonPhone:"---")+" ")]}}])}),a("el-table-column",{attrs:{prop:"contactPersonWechat",label:"微信",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.contactPersonWechat?e.row.contactPersonWechat:"---")+" ")]}}])}),a("el-table-column",{attrs:{prop:"contactPersonWangwang",label:"阿里旺旺",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.contactPersonWangwang?e.row.contactPersonWangwang:"---")+" ")]}}])}),a("el-table-column",{attrs:{prop:"lastFollowUpDate",label:"上次跟进时间",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(null===e.row.lastFollowUpDate?"---":e.row.lastFollowUpDate.split(" ")[0])+" ")]}}])}),a("el-table-column",{attrs:{prop:"customerStatusId",label:"客户状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.customerStatusId?a("el-tag",{attrs:{type:"danger"}},[t._v("跟进中")]):"2"===e.row.customerStatusId?a("el-tag",{attrs:{type:"success"}},[t._v("已成交")]):a("el-tag",{attrs:{type:"info"}},[t._v("已失效")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.clientDetailHandle(e.row.customerId)}}},[t._v("详情")]),a("el-button",{attrs:{type:"warning",size:"mini",plain:""},on:{click:function(a){return t.clientUpdateHandle(e.row.customerId,e.row.customerName,e.row.userId,e.row.userName)}}},[t._v("跟进")]),a("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(a){return t.linkmanHandle(e.row.customerId)}}},[t._v("联系人")])]}}])})],1)],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)},s=[],n=(a("d3b7"),a("498a"),a("96cf"),a("4328")),o=a.n(n),u={data:function(){return{customerTableData:[],detailDialogVisible:!1,editDialogVisible:!1,signBillDialogVisible:!1,searchInputValue:"",totalNum:null,pageSize:null,currentPage:1,searchValue:"",options:[],customerStatusName:"",customerStatus:"1"}},activated:function(){this.$route.meta.isUseCache||(this.customerTableData=[],this.getCustomer(this.customerStatus)),this.$route.meta.isUseCache=!1},beforeRouteLeave:function(t,e,a){"/detail/customerDetail"===t&&(e.meta.isUseCache=!0),a()},created:function(){this.userid=window.sessionStorage.getItem("userId"),this.getCustomer(this.customerStatus),this.findCustomerStatus()},mounted:function(){},methods:{customerChangeHandle:function(t){t?(this.customerStatus=t,this.pageSize=10,this.currentPage=1):this.customerStatus="1",this.getCustomer(this.customerStatus)},findCustomerStatus:function(){var t,e;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(this.$http.post("/customerStatus/findCustomerStatus"));case 2:t=a.sent,e=t.data,this.options=e.data;case 5:case"end":return a.stop()}}),null,this)},searchClear:function(){this.searchHandle()},searchChange:function(){this.searchHandle()},searchHandle:function(){var t,e,a;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return t=o.a.stringify({userId:this.userid,customerSearchContent:this.searchValue.trim()}),r.next=3,regeneratorRuntime.awrap(this.$http.post("/customer/findCustomerByUserId",t));case 3:if(e=r.sent,a=e.data,200===a.status){r.next=7;break}return r.abrupt("return",this.$message.error(a.msg));case 7:this.totalNum=a.data.totalNum-0,this.pageSize=a.data.pageSize-0,this.currentPage=a.data.currentPage,this.customerTableData=a.data.items;case 11:case"end":return r.stop()}}),null,this)},handleCurrentChange:function(t){this.currentPage=t,this.getCustomer(this.customerStatus)},handleSizeChange:function(t){this.pageSize=t,this.getCustomer(this.customerStatus)},getCustomer:function(t){var e,a,r;return regeneratorRuntime.async((function(s){while(1)switch(s.prev=s.next){case 0:return e=o.a.stringify({userId:this.userid,pageSize:this.pageSize,pageNum:this.currentPage,customerStatusId:t}),s.next=3,regeneratorRuntime.awrap(this.$http.post("/customer/findCustomerByUserId",e));case 3:if(a=s.sent,r=a.data,200===r.status){s.next=7;break}return s.abrupt("return",this.$message.error(r.msg));case 7:this.totalNum=r.data.totalNum-0,this.pageSize=r.data.pageSize-0,this.currentPage=r.data.currentPage,this.customerTableData=r.data.items;case 11:case"end":return s.stop()}}),null,this)},createClientHandle:function(t){this.$router.push("/my/createclient".concat(this.userid))},clientDetailHandle:function(t){this.$router.push("/detail/customerDetail"+t)},clientUpdateHandle:function(t,e,a,r){this.$router.push({path:"/update/customerUpdate",query:{customerId:t,customerName:e,userId:a,userName:r}})},linkmanHandle:function(t){this.$router.push("/linkman/linkmanMain"+t)}},watch:{searchValue:function(){this.searchValue.trim().length<=0&&this.getCustomer()}}},c=u,i=a("2877"),l=Object(i["a"])(c,r,s,!1,null,"13e7a994",null);e["default"]=l.exports},e070:function(t,e,a){var r=a("d039"),s=a("5899"),n="​᠎";t.exports=function(t){return r((function(){return!!s[t]()||n[t]()!=n||s[t].name!==t}))}},e712:function(t,e,a){"use strict";var r=a("2ace"),s=a.n(r);s.a}}]);
//# sourceMappingURL=myClient_createClient_customerPublicArea.b3aad651.js.map